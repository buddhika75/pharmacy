<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./resources/template/template.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:in="http://java.sun.com/jsf/composite/inward"
                xmlns:p="http://primefaces.org/ui">


    <ui:define name="content">

        <h:panelGroup >
            <h:form  >
                <p:panel  >
                    <f:facet name="header">
                        <p:outputLabel value="Inward Payment Bill"/>
                        <p:commandButton ajax="false"  value="Clear" style="float:right;" action="#{bhtSummeryController.makeNull}" />                        
                        <p:commandButton ajax="false" value="To Settle Bill" style="float:right;" action="#{bhtSummeryController.toSettleBill()}" />

                    </f:facet>
                    <h:panelGrid columns="3" style="min-width: 100%;">
                        <p:panel header="BHT">
                            <p:autoComplete converter="admis" widgetVar="aPt" id="acPt" forceSelection="true" 
                                            value="#{bhtSummeryController.patientEncounter}"
                                            completeMethod="#{admissionController.completePatient2}" 
                                            var="myItem" itemValue="#{myItem}" 
                                            itemLabel="#{myItem.bhtNo}" 
                                            size="30"  >
                                <p:ajax event="itemSelect" process="acPt" 
                                        update="panSearch2 tvPt sum tot dis  " 
                                        listener="#{bhtSummeryController.createTables()}"/>
                                <p:column>
                                    #{myItem.bhtNo}
                                </p:column>
                                <p:column>
                                    #{myItem.patient.person.nameWithTitle}
                                </p:column>
                                <p:column>
                                    <h:outputLabel value="#{myItem.currentPatientRoom.roomFacilityCharge.name}"/>
                                </p:column>
                                <p:column>
                                    <h:outputLabel value="Discharged"  rendered="#{myItem.discharged}"/>
                                </p:column>
                            </p:autoComplete>   
                            <h:panelGroup id="panSearch2">
                                <in:bhtDetail admission="#{bhtSummeryController.patientEncounter}"/>
                            </h:panelGroup>
                        </p:panel>

                        <p:panel header="Summery" id="ss">
                            <h:panelGrid columns="2" id="tot">
                                <h:outputLabel  value="Total Charges" style="font-weight: bold"/>
                                <h:outputLabel id="gtot" value="#{bhtSummeryController.grantTotal}"/>                                                      
                                <h:outputLabel value="Paid " style="font-weight: bold"/>
                                <h:outputLabel value="#{bhtSummeryController.paid}"/>
                                <h:outputLabel value="Due " style="font-weight: bold"/>
                                <h:outputLabel id="due" value="#{bhtSummeryController.due}"/>
                            </h:panelGrid>
                        </p:panel>
                        <p:panel id="dis" header="Discharge">
                            <h:panelGrid columns="2">
                                <p:outputLabel value="Discharge Time"/>
                                <p:calendar value="#{bhtSummeryController.patientEncounter.dateOfDischarge}" pattern="dd MMMM yyyy hh mm a" >                               
                                    <f:ajax execute="@this" render="sum tvPt ss" event="dateSelect" listener="#{bhtSummeryController.checkDate}" />
                                </p:calendar> 
                                <p:commandButton ajax="false" style="float: right;" value="Disharge" action="#{bhtSummeryController.discharge}" />
                                <p:commandButton ajax="false" style="float: right;" value="Disharge Cancel" action="#{bhtSummeryController.dischargeCancel}" />
                            </h:panelGrid>
                        </p:panel>
                    </h:panelGrid>
                    <h:panelGrid id="sum" columns="2">
                        <p:dataTable scrollable="true" scrollHeight="300" scrollWidth="400" value="#{bhtSummeryController.chargeItemTotals}" style="max-width: 25%;" var="c">
                            <p:column >
                                #{c.inwardChargeType}
                            </p:column>
                            <p:column style="text-align: right;" >
                                <h:outputLabel value="#{c.total}">
                                </h:outputLabel>
                            </p:column>
                        </p:dataTable>                       

                        <p:tabView  id="tvPt" style="min-height: 75%;"  >
                            <p:tab id="tabNewPt" title="Room Detail" >
                                <p:dataTable  scrollable="true" scrollHeight="300" 
                                              value="#{bhtSummeryController.roomChargeDatas}" var="rm">
                                    <p:column headerText="Room Name">
                                        #{rm.patientRoom.roomFacilityCharge.name}
                                    </p:column>                                                                          
                                    <p:column headerText="Admitted At">
                                        <p:calendar navigator="true"  
                                                    value="#{rm.patientRoom.admittedAt}" 
                                                    pattern="dd MMMM yyyy hh mm a" />     
                                    </p:column>
                                    <p:column headerText="Discharged At">                                      
                                        <p:calendar navigator="true"  
                                                    value="#{rm.patientRoom.dischargedAt}" 
                                                    pattern="dd MMMM yyyy hh mm a" /> 
                                    </p:column>
                                    <p:column headerText="Room Charge">
                                        #{rm.chargeTot}
                                    </p:column> 
                                    <p:column headerText="Maintain Charge">
                                        #{rm.maintananceTot}
                                    </p:column>    
                                    <p:column headerText="MO Charge">
                                        #{rm.moChargeTot}
                                    </p:column>                                        
                                    <p:column headerText="Nursing Charge">
                                        #{rm.nursingTot}
                                    </p:column> 
                                    <p:column>
                                        <p:commandButton ajax="false" value="Update"
                                                         action="#{bhtSummeryController.updatePatientRoom(rm)}"/>
                                    </p:column>

                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabTimed" title="Timed Service Detail"  >                              
                                <p:dataTable  scrollable="true" scrollHeight="300"  value="#{bhtSummeryController.patientItems}" var="pt">
                                    <p:column headerText="Service Name">
                                        #{pt.item.name}
                                    </p:column>
                                    <p:column headerText="Start Time">
                                        <p:calendar navigator="true"  
                                                    value="#{pt.fromTime}" 
                                                    pattern="dd MMMM yyyy hh mm a" />           
                                    </p:column>
                                    <p:column headerText="Stopped Time">
                                        <p:calendar navigator="true"  
                                                    value="#{pt.toTime}" 
                                                    pattern="dd MMMM yyyy hh mm a" />                                    
                                    </p:column>
                                    <p:column headerText="Total">
                                        #{pt.serviceValue}
                                    </p:column>                                    
                                    <p:column >
                                        <p:commandButton ajax="false" value="Update" 
                                                         action="#{bhtSummeryController.updatePatientItem(pt)}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabSer" title="Service Detail"  >

                                <p:dataTable  scrollable="true" scrollHeight="300" 
                                              value="#{bhtSummeryController.departmentBillItems}" var="dep">
                                    <p:columnGroup type="header">
                                        <p:row>
                                            <p:column >
                                                <f:facet name="header">
                                                    Item Name
                                                </f:facet>
                                            </p:column>
                                            <p:column >
                                                <f:facet name="header">
                                                    Cost
                                                </f:facet>
                                            </p:column>
                                            <p:column >
                                                <f:facet name="header">
                                                    Added Date
                                                </f:facet>
                                            </p:column>
                                            <p:column >
                                                <f:facet name="header">
                                                    Added Time
                                                </f:facet>
                                            </p:column>
                                            <p:column >
                                                <f:facet name="header">
                                                    Added User
                                                </f:facet>
                                            </p:column>
                                            <p:column >
                                                <f:facet name="header">
                                                    Update BillItem
                                                </f:facet>
                                            </p:column>
                                            <p:column >
                                                <f:facet name="header">
                                                    View Bill
                                                </f:facet>
                                            </p:column>
                                        </p:row>
                                    </p:columnGroup>

                                    <p:subTable value="#{dep.billItems}" var="ser">
                                        <f:facet name="header">
                                            <h:outputLabel value="#{dep.department.name}"/>
                                        </f:facet>
                                        <p:column>
                                            #{ser.item.name}
                                        </p:column>
                                        <p:column>
                                            #{ser.netValue}
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="#{ser.bill.createdAt}">
                                                <f:convertDateTime pattern="dd MM yyyy"/>
                                            </h:outputLabel>                                                   
                                            <br/>
                                            <h:panelGroup rendered="#{ser.bill.cancelled}" >
                                                <h:outputLabel style="color: red;" value="Cancelled at " />
                                                <h:outputLabel style="color: red;" rendered="#{ser.bill.cancelled}" 
                                                               value="#{ser.bill.cancelledBill.createdAt}" >
                                                    <f:convertDateTime pattern="dd MMM yyyy"/>
                                                </h:outputLabel>
                                            </h:panelGroup>
                                            <br/>
                                            <h:panelGroup  rendered="#{ser.bill.editedAt ne null}" >
                                                <h:outputLabel style="color: #008000;" value="Edited at " />
                                                <h:outputLabel style="color: #008000;" 
                                                               value="#{ser.bill.editedAt}" >
                                                    <f:convertDateTime pattern="dd MMM yyyy"/>
                                                </h:outputLabel>
                                            </h:panelGroup>
                                        </p:column>
                                        <p:column >
                                            <h:outputLabel value="#{ser.bill.createdAt}">
                                                <f:convertDateTime pattern="hh mm a"/>
                                            </h:outputLabel>                                                   
                                            <br/>
                                            <h:panelGroup rendered="#{ser.bill.cancelled}" >
                                                <h:outputLabel style="color: red;" value="Cancelled at " />
                                                <h:outputLabel style="color: red;" rendered="#{ser.bill.cancelled}" 
                                                               value="#{ser.bill.cancelledBill.createdAt}" >
                                                    <f:convertDateTime pattern="hh mm a"/>
                                                </h:outputLabel>
                                            </h:panelGroup>
                                            <br/>
                                            <h:panelGroup  rendered="#{ser.bill.editedAt ne null}" >
                                                <h:outputLabel style="color: #008000;" value="Edited at " />
                                                <h:outputLabel style="color: #008000;" 
                                                               value="#{ser.bill.editedAt}" >
                                                    <f:convertDateTime pattern="hh mm a"/>
                                                </h:outputLabel>
                                            </h:panelGroup>
                                        </p:column>
                                        <p:column >
                                            <h:outputLabel value="#{ser.bill.creater.webUserPerson.name}"/>     
                                            <br/>
                                            <h:panelGroup rendered="#{ser.bill.cancelled}" >
                                                <h:outputLabel style="color: red;" value="Cancelled By " />
                                                <h:outputLabel style="color: red;" rendered="#{ser.bill.cancelled}" 
                                                               value="#{ser.bill.cancelledBill.creater.webUserPerson.name}" >                                       
                                                </h:outputLabel>
                                            </h:panelGroup>
                                            <br/>
                                            <h:panelGroup  rendered="#{ser.bill.editor ne null}" >
                                                <h:outputLabel style="color: #008000;" value="Edited By " />
                                                <h:outputLabel style="color: #008000;" 
                                                               value="#{ser.bill.editor.webUserPerson.name}" >
                                                </h:outputLabel>
                                            </h:panelGroup>
                                        </p:column>     
                                        <p:column>
                                            <p:commandButton ajax="false" action="inward_edit_bill_item"  value="Update Bill Fee" >                                              
                                                <f:setPropertyActionListener value="#{ser}" target="#{serviceFeeEdit.billItem}"/>
                                            </p:commandButton>
                                        </p:column>
                                        <p:column>
                                            <p:commandButton ajax="false" action="inward_reprint_bill_service"  value="View Bill" >                                              
                                                <f:setPropertyActionListener value="#{ser.bill}" target="#{inwardSearch.bill}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:subTable>
                                </p:dataTable>
                            </p:tab>

                            <p:tab title="Madicine Issue">
                                <p:dataTable value="#{bhtSummeryController.pharmacyIssues}" var="iss" scrollable="true"
                                             scrollHeight="300">
                                    <p:column headerText="Bill No">
                                        #{iss.deptId}
                                    </p:column>
                                    <p:column headerText="Bill Total">
                                        #{iss.total}
                                    </p:column>
                                    <p:column headerText="Bill Total With Matrix">
                                        #{iss.netTotal}
                                    </p:column>
                                    <p:column>
                                        <h:outputLabel value="#{iss.createdAt}">
                                            <f:convertDateTime pattern="dd MM yyyy"/>
                                        </h:outputLabel>                                                   
                                        <br/>
                                        <h:panelGroup rendered="#{iss.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled at " />
                                            <h:outputLabel style="color: red;" rendered="#{iss.cancelled}" 
                                                           value="#{iss.cancelledBill.createdAt}" >
                                                <f:convertDateTime pattern="dd MMM yyyy"/>
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column >
                                        <h:outputLabel value="#{iss.createdAt}">
                                            <f:convertDateTime pattern="hh mm a"/>
                                        </h:outputLabel>                                                   
                                        <br/>
                                        <h:panelGroup rendered="#{iss.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled at " />
                                            <h:outputLabel style="color: red;" rendered="#{iss.cancelled}" 
                                                           value="#{iss.cancelledBill.createdAt}" >
                                                <f:convertDateTime pattern="hh mm a"/>
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column >
                                        <h:outputLabel value="#{iss.creater.webUserPerson.name}"/>     
                                        <br/>
                                        <h:panelGroup rendered="#{iss.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled By " />
                                            <h:outputLabel style="color: red;" rendered="#{iss.cancelled}" 
                                                           value="#{iss.cancelledBill.creater.webUserPerson.name}" >                                       
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>  
                                    <p:column>
                                        <p:commandButton ajax="false" action="pharmacy_reprint_bill_sale_bht" 
                                                         rendered="#{iss.billClass eq 'class com.divudi.entity.PreBill'}" value="View Issue" >                                              
                                            <f:setPropertyActionListener value="#{iss}" target="#{pharmacyBillSearch.bill}"/>
                                        </p:commandButton>
                                        <p:commandButton ajax="false" action="pharmacy_reprint_bill_return_bht" 
                                                         rendered="#{iss.billClass eq 'class com.divudi.entity.RefundBill'}"
                                                         value="View Return" >                                              
                                            <f:setPropertyActionListener value="#{iss}" target="#{pharmacyBillSearch.bill}"/>
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab title="Store Issue">
                                <p:dataTable value="#{bhtSummeryController.storeIssues}" var="iss2" scrollable="true"
                                             scrollHeight="300">
                                    <p:column headerText="Bill No">
                                        #{iss2.deptId}
                                    </p:column>
                                    <p:column headerText="Bill Total">
                                        #{iss2.total}
                                    </p:column>
                                    <p:column headerText="Bill Total With Matrix">
                                        #{iss2.netTotal}
                                    </p:column>
                                    <p:column>
                                        <h:outputLabel value="#{iss2.createdAt}">
                                            <f:convertDateTime pattern="dd MM yyyy"/>
                                        </h:outputLabel>                                                   
                                        <br/>
                                        <h:panelGroup rendered="#{iss2.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled at " />
                                            <h:outputLabel style="color: red;" rendered="#{iss2.cancelled}" 
                                                           value="#{iss2.cancelledBill.createdAt}" >
                                                <f:convertDateTime pattern="dd MMM yyyy"/>
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column >
                                        <h:outputLabel value="#{iss2.createdAt}">
                                            <f:convertDateTime pattern="hh mm a"/>
                                        </h:outputLabel>                                                   
                                        <br/>
                                        <h:panelGroup rendered="#{iss2.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled at " />
                                            <h:outputLabel style="color: red;" rendered="#{iss2.cancelled}" 
                                                           value="#{iss2.cancelledBill.createdAt}" >
                                                <f:convertDateTime pattern="hh mm a"/>
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column >
                                        <h:outputLabel value="#{iss2.creater.webUserPerson.name}"/>     
                                        <br/>
                                        <h:panelGroup rendered="#{iss2.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled By " />
                                            <h:outputLabel style="color: red;" rendered="#{iss2.cancelled}" 
                                                           value="#{iss2.cancelledBill.creater.webUserPerson.name}" >                                       
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>  
                                    <p:column>                                       
                                        <p:commandButton ajax="false" action="store_reprint_bill_sale_bht"  value="View Return" >                                              
                                            <f:setPropertyActionListener value="#{iss2}" target="#{inwardSearch.bill}"/>
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabAdd" title="Additional Charge Detail"  >
                                <p:dataTable    scrollable="true" scrollHeight="300" 
                                                value="#{bhtSummeryController.additionalChargeBill}" var="bil">
                                    <p:column headerText="Name">
                                        #{bil.comments}
                                    </p:column>
                                    <p:column headerText="Cost">
                                        #{bil.total}
                                    </p:column>
                                    <p:column headerText="Added Date">
                                        <h:outputLabel value="#{bil.createdAt}">
                                            <f:convertDateTime pattern="dd MM yyyy"/>
                                        </h:outputLabel>                                                  
                                        <br/>
                                        <h:panelGroup rendered="#{bil.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled at " />
                                            <h:outputLabel style="color: red;" rendered="#{bil.cancelled}" 
                                                           value="#{bil.cancelledBill.createdAt}" >
                                                <f:convertDateTime pattern="dd MM yyyy"/>
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column headerText="Added Time">
                                        <h:outputLabel value="#{bil.createdAt}">
                                            <f:convertDateTime pattern="hh mm a"/>
                                        </h:outputLabel>                                                   
                                        <br/>
                                        <h:panelGroup rendered="#{bil.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled at " />
                                            <h:outputLabel style="color: red;" rendered="#{bil.cancelled}" 
                                                           value="#{bil.cancelledBill.createdAt}" >
                                                <f:convertDateTime pattern="hh mm a"/>
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column headerText="Added User">
                                        <h:outputLabel value="#{bil.creater.webUserPerson.name}"/>     
                                        <br/>
                                        <h:panelGroup rendered="#{bil.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled By " />
                                            <h:outputLabel style="color: red;" rendered="#{ser.cancelled}" 
                                                           value="#{bil.cancelledBill.creater.webUserPerson.name}" >                                       
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column>
                                        <h:commandLink action="inward_reprint_bill" value="Remove">
                                            <h:outputLabel  ></h:outputLabel>
                                            <f:setPropertyActionListener value="#{bil}" target="#{inwardSearch.bill}"/>
                                        </h:commandLink>
                                    </p:column>

                                </p:dataTable>
                            </p:tab>



                            <p:tab id="tabPro" title="Professional Fee"  >
                                <p:dataTable  scrollable="true" scrollHeight="300"  value="#{bhtSummeryController.profesionallFee}" var="pf">
                                    <p:column headerText="Name">
                                        #{pf.staff.person.nameWithTitle}
                                    </p:column>
                                    <p:column headerText="Fee Value">
                                        #{pf.feeValue}
                                    </p:column>
                                    <p:column headerText="Fee At">
                                        <h:outputLabel value="#{pf.feeAt}">
                                            <f:convertDateTime pattern="dd MMMM yyyy hh mm a"/>
                                        </h:outputLabel>
                                    </p:column>
                                    <p:column headerText="Added Time">                                      
                                        <h:outputLabel value="#{pf.bill.createdAt}">
                                            <f:convertDateTime pattern="dd MM yyyy hh mm a"/>
                                        </h:outputLabel>                                                   
                                        <br/>
                                        <h:panelGroup rendered="#{pf.bill.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled at " />
                                            <h:outputLabel style="color: red;" rendered="#{pf.bill.cancelled}" 
                                                           value="#{pf.bill.cancelledBill.createdAt}" >
                                                <f:convertDateTime pattern="dd MM yyyy hh mm a"/>
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column headerText="Added User">
                                        <h:outputLabel value="#{pf.bill.creater.webUserPerson.name}"/>     
                                        <br/>
                                        <h:panelGroup rendered="#{pf.bill.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled By " />
                                            <h:outputLabel style="color: red;" rendered="#{pf.bill.cancelled}" 
                                                           value="#{pf.bill.cancelledBill.creater.webUserPerson.name}" >                                       
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column>
                                        <h:commandLink action="inward_reprint_bill_professional" value="Remove">
                                            <h:outputLabel  ></h:outputLabel>
                                            <f:setPropertyActionListener value="#{pf.bill}" target="#{inwardSearch.bill}"/>
                                        </h:commandLink>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabP" title="Payments"  >
                                <p:dataTable  scrollable="true" scrollHeight="300"  value="#{bhtSummeryController.paymentBill}" var="p">
                                    <p:column headerText="Paid At">  
                                        <h:outputLabel value="#{p.createdAt}">
                                            <f:convertDateTime pattern="dd MM yyyy hh mm a"/>
                                        </h:outputLabel>                                                   
                                        <br/>
                                        <h:panelGroup rendered="#{p.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled at " />
                                            <h:outputLabel style="color: red;" rendered="#{p.cancelled}" 
                                                           value="#{p.cancelledBill.createdAt}" >
                                                <f:convertDateTime pattern="dd MM yyyy hh mm a"/>
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column headerText="Added User">
                                        <h:outputLabel value="#{p.creater.webUserPerson.name}"/>     
                                        <br/>
                                        <h:panelGroup rendered="#{p.cancelled}" >
                                            <h:outputLabel style="color: red;" value="Cancelled By " />
                                            <h:outputLabel style="color: red;" rendered="#{p.cancelled}" 
                                                           value="#{p.cancelledBill.creater.webUserPerson.name}" >                                       
                                            </h:outputLabel>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column headerText="Value">
                                        #{p.netTotal}
                                    </p:column>
                                    <p:column>
                                        <p:commandButton ajax="false" action="inward_reprint_bill_payment" value="Remove">
                                            <f:setPropertyActionListener value="#{p}" target="#{billSearch.bill}"/>
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab  title="Surgery"  >
                                <p:dataTable  scrollable="true" scrollHeight="300"
                                              value="#{bhtSummeryController.surgeryBill}" var="pb">

                                    <p:column headerText="Bht NoSurgery Name" >
                                        <h:outputLabel value="#{pb.procedure.item.name}" ></h:outputLabel>
                                    </p:column>

                                    <p:column headerText="Client" >
                                        <h:outputLabel value="#{pb.patientEncounter.patient.person.nameWithTitle}" ></h:outputLabel>
                                    </p:column>         
                                    <p:column headerText="Value" >                              
                                        <h:outputLabel value="#{pb.total}" >
                                            <f:convertNumber pattern="#,000.00"/>
                                        </h:outputLabel>                                  
                                    </p:column>       
                                    <p:column>
                                        <p:commandButton ajax="false" value="View Bill" action="inward_bill_surgery">
                                            <f:setPropertyActionListener value="#{pb}" target="#{surgeryBillController.batchBill}"/>
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                        </p:tabView>

                    </h:panelGrid>
                </p:panel>

            </h:form>

        </h:panelGroup>



    </ui:define>

</ui:composition>
